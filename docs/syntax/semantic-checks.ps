%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: semantic-checks.dvi
%%Pages: 7
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Palatino-Roman Palatino-Bold Courier Palatino-Italic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -P cmz -t letter -o semantic-checks.ps
%+ semantic-checks.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2007.01.29:0040
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (semantic-checks.dvi)
@start /Fa 135[45 3[30 14[35 1[37 1[40 97[{
TeXBase1Encoding ReEncodeFont}5 90.9091 /Palatino-Italic
rf /Fb 133[37 42 39 62 42 45 24 32 30 1[45 41 43 66 22
42 1[22 43 42 25 36 46 33 41 37 12[46 15[58 8[19 12[19
1[19 4[21 39[{TeXBase1Encoding ReEncodeFont}30 74.7198
/Palatino-Roman rf /Fc 205[25 25 49[{TeXBase1Encoding ReEncodeFont}2
49.8132 /Palatino-Roman rf /Fd 205[33 33 49[{
TeXBase1Encoding ReEncodeFont}2 66.4176 /Palatino-Roman
rf /Fe 130[55 1[55 1[55 55 1[55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 1[55 55 55 55 55 55 3[55 1[55 6[55
55 2[55 3[55 1[55 55 2[55 2[55 55 55 2[55 55 55 55 5[55
55 55 55 55 55 1[55 55 55 55 1[55 55 40[{TeXBase1Encoding ReEncodeFont}
53 90.9091 /Courier rf /Ff 133[50 55 50 83 1[61 33 44
39 1[61 55 61 89 33 61 33 33 1[55 39 50 61 44 61 50 9[100
1[78 66 61 3[83 83 100 3[39 83 1[55 61 1[72 1[78 11[50
50 50 50 50 2[25 1[25 44[{TeXBase1Encoding ReEncodeFont}43
99.6264 /Palatino-Bold rf /Fg 134[66 4[40 53 47 1[73
66 73 106 40 73 1[40 73 66 1[60 1[53 1[60 9[120 2[80
73 2[73 1[100 10[86 13[60 60 60 60 60 49[{TeXBase1Encoding ReEncodeFont}
27 119.552 /Palatino-Bold rf /Fh 107[45 45 24[45 51 47
76 51 55 30 39 36 51 55 50 53 80 26 51 21 26 53 51 30
44 56 40 50 45 9[91 2[56 48 2[55 71 76 86 56 2[31 2[51
56 3[71 5[23 23 1[45 45 45 45 45 45 45 45 45 55 23 30
23 2[30 30 25 35[55 55 2[{TeXBase1Encoding ReEncodeFont}60
90.9091 /Palatino-Roman rf /Fi 134[55 3[60 2[39 3[58
12[50 22[33 16[50 1[50 4[50 1[50 3[25 44[{TeXBase1Encoding ReEncodeFont}
11 99.6264 /Palatino-Roman rf /Fj 139[47 61 57 3[83 127
1[80 1[42 83 2[69 1[64 1[72 13[75 9[48 5[102 67[{
TeXBase1Encoding ReEncodeFont}14 143.462 /Palatino-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
letter
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 1119 937 a Fj(Str)m(eamIt)36 b(Semantic)f(Checks)1583
1394 y Fi(January)26 b(29,)e(2007)589 1743 y Fh(This)34
b(document)e(contains)h(a)i(list)e(of)h(semantic)f(checks)g(that)g
(should)g(be)g(per)n(-)448 1856 y(formed)26 b(on)h(Str)n(eamIt)f(pr)n
(ograms)g(after)h(they)f(have)h(been)f(parsed.)40 b(These)25
b(assume)448 1968 y(the)31 b(pr)n(ogram)g(is)h(syntactically)g(corr)n
(ect;)k(it)31 b(must)g(pass)g(thr)n(ough)f(the)h(parser)g(cor)n(-)448
2081 y(r)n(ectly)-10 b(.)448 2380 y Fg(1)120 b(Statement)29
b(Placement)448 2594 y Ff(1.1)99 b(Init,)25 b(W)-7 b(ork,)24
b(and)h(Helper)f(Functions)562 2771 y Fh(1.)46 b Fe(add)33
b Fh(statements)g(can)j(only)e(appear)h(in)g(init)h(functions)e(in)h
(split-joins)g(and)676 2884 y(pipelines;)562 3072 y(2.)46
b Fe(split)17 b Fh(and)i Fe(join)e Fh(statements)g(can)j(only)f(appear)
g(in)g(init)h(functions)f(in)g(split-)676 3185 y(joins)j(and)h
(feedback)f(loops;)562 3372 y(3.)46 b Fe(loop)n Fh(,)30
b Fe(body)n Fh(,)g(and)f Fe(enqueue)c Fh(statements)i(can)i(only)g
(appear)f(in)h(init)g(func-)676 3485 y(tions)21 b(in)j(feedback)e
(loops;)562 3673 y(4.)46 b Fe(push)33 b Fh(statements)h(can)i(only)f
(appear)h(in)g(work)e(and)i(helper)f(functions)g(in)676
3786 y(\002lters.)562 3973 y(5.)46 b Fe(pop)21 b Fh(and)i
Fe(peek)d Fh(expr)n(essions)h(can)i(only)f(appear)h(in)g(work)e(and)i
(helper)e(func-)676 4086 y(tions)g(in)j(\002lters.)562
4274 y(6.)46 b(If)29 b(a)h(work)e(function)h(does)f(not)g(declar)n(e)h
(I/O)h(rates,)g(it)f(may)h(not)e(use)g Fe(push)n Fh(,)676
4387 y Fe(pop)n Fh(,)23 b(or)f Fe(peek)n Fh(.)28 b(If)23
b(it)f(declar)n(es)h(a)g(push)f(rate,)g(though,)f(it)h(must)g(call)j
Fe(push)n Fh(.)3310 4354 y Fd(1)562 4574 y Fh(7.)46 b(Every)21
b(\002lter)h(must)g(have)h(a)h(work)d(function.)p 448
4661 1196 4 v 554 4718 a Fc(1)583 4750 y Fb(Declaring)e(a)i(nonzer)o(o)
f(peek)f(rate)h(af)o(fects)g(the)h(scheduling)f(but)h(not)g(corr)o
(ectness,)d(so)i(you'r)o(e)e(not)448 4841 y(obligated)g(to)h(peek;)f
(however)-6 b(,)18 b(you)g(ar)o(e)g(obligated)g(to)h(pop)f(the)i(right)
e(number)h(of)f(items.)1920 5225 y Fh(1)p eop
%%Page: 2 2
2 1 bop 562 573 a Fh(8.)46 b(Every)22 b(str)n(eam)h(object)g(that)g(is)
g(not)f(a)i(\002lter)f(must)f(have)i(an)g(init)f(function,)g(but)676
686 y(may)g(have)g(no)f(other)f(functions.)1849 653 y
Fd(2)448 941 y Ff(1.2)99 b(Control)26 b(Flow)g(and)e(Initialization)i
(Code)448 1117 y Fh(Several)34 b(statements)e(may)j(only)e(be)h
(executed)e(once)i(per)f(function;)39 b(other)33 b(state-)448
1230 y(ments)22 b(ar)n(e)h(sensitive)f(to)g(the)f(or)n(der)h(in)h
(which)g(they)f(ar)n(e)h(executed.)562 1443 y(1.)46 b
Fe(split)m Fh(,)28 b Fe(join)n Fh(,)f Fe(body)n Fh(,)h(and)e
Fe(loop)f Fh(statements)f(must)i(be)h(executed)d(exactly)676
1556 y(once)35 b(if)i(they)e(ar)n(e)h(allowed)g(at)h(all.)69
b(Every)35 b(path)h(of)g(contr)n(ol)g(thr)n(ough)f(the)676
1669 y(initialization)25 b(code)d(must)g(r)n(esult)g(in)h(exactly)g
(one)e(execution.)448 1967 y Fg(2)120 b(T)-11 b(yping)448
2182 y Ff(2.1)99 b(Stream)24 b(Connections)448 2359 y
Fh(\223Match\224)30 b(within)e(this)f(section)g(means)h(an)g
Fa(exact)h Fh(match)g(in)f(type;)h(ther)n(e)e(is)h(no)f(im-)448
2471 y(plicit)d(type)d(pr)n(omotion)h(acr)n(oss)g(tapes.)562
2684 y(1.)46 b(For)27 b(a)h(pipeline,)h(the)e(input)h(type)e(must)h
(match)i(the)e(input)h(type)e(of)i(the)f(\002rst)676
2797 y(child)20 b(and)f(the)f(output)g(type)f(of)j(the)e(last)h(child)h
(must)f(match)h(the)e(output)g(type)676 2910 y(of)k(the)g(pipeline.)562
3097 y(2.)46 b(W)-5 b(ithin)24 b(a)g(pipeline,)g(the)f(output)f(type)h
(of)h(one)f(child)i(must)e(match)i(the)e(input)676 3210
y(type)e(of)h(the)g(next)g(child.)562 3398 y(3.)46 b(The)34
b(input)g(type)f(of)i(each)g(of)f(a)i(split-join's)e(childr)n(en)i
(must)e(be)g(either)g(the)676 3511 y(input)22 b(type)f(of)i(the)f
(split-join)h(or)g Fe(void)n Fh(.)29 b(Identical)23 b(constraints)f
(hold)g(for)h(the)676 3624 y(output.)562 3811 y(4.)46
b(The)35 b(output)f(type)h(of)h(a)h(feedback)f(loop's)f(loop)h(str)n
(eam)g(must)f(match)i(the)676 3924 y(input)30 b(type)g(of)g(its)h(body)
f(str)n(eam.)53 b(The)30 b(input)h(type)e(of)i(the)f(feedback)h(loop)
676 4037 y(must)g(be)h(either)f(the)g(same)h(type)e(as)i(the)f(body)g
(input)h(or)f Fe(void)n Fh(.)56 b(Identical)676 4150
y(constraints)21 b(hold)i(for)f(the)g(output)f(side)h(of)g(the)g
(feedback)g(loop.)562 4338 y(5.)46 b(Exactly)21 b(one)f(str)n(eam)h(in)
g(the)f(pr)n(ogram)h(has)g(the)g(str)n(eam)f(type)g Fe(void)n(->)o
(void)n Fh(.)676 4451 y(This)i(str)n(eam)g(must)g(be)h(named.)p
448 4514 1196 4 v 554 4569 a Fc(2)583 4601 y Fb(This)c(is)g(curr)o
(ently)f(implicit)g(in)i(the)g(language)f(syntax.)25
b(The)19 b(constraint)h(and)g(syntax)f(could)g(both)448
4692 y(change)h(due)e(to)h(r)o(einitialization,)f(or)g(by)h(adding)f
(message)f(handlers)i(to)g(composite)e(str)o(eams.)1920
5225 y Fh(2)p eop
%%Page: 3 3
3 2 bop 448 573 a Ff(2.2)99 b(Implications)26 b(of)f(Stream)f(T)-9
b(ypes)562 750 y Fh(1.)46 b(The)22 b(splitter)g(of)i(a)f(split-join)h
(must)f(be)g Fe(roundrobin)-5 b(\(0\))22 b Fh(if)i(the)f(input)g(type)
676 863 y(of)38 b(the)f(str)n(eam)h(is)h Fe(void)n Fh(;)46
b(it)38 b(may)h(not)f(be)g Fe(roundrobin)-5 b(\(0\))37
b Fh(otherwise.)676 976 y(Identical)22 b(constraints)g(hold)g(for)h
(the)f(output.)562 1163 y(2.)46 b(If)23 b(a)h(split-join)g(has)f(some)g
(childr)n(en)h(with)f Fe(void)f Fh(inputs)h(and)g(some)g(childr)n(en)
676 1276 y(with)17 b(non-)p Fe(void)f Fh(inputs,)h(the)g(splitter)g
(must)g(be)h(a)g(r)n(ound-r)n(obin)g(splitter)e(with)676
1389 y(a)29 b(declar)n(ed)g(weight)f(of)g(0)i(for)f(each)g(of)g(the)f
Fe(void)f Fh(childr)n(en.)47 b(Identical)29 b(con-)676
1502 y(straints)21 b(hold)i(for)f(the)g(output)f(and)i(the)e(joiner)-7
b(.)562 1690 y(3.)46 b(The)30 b(splitter)f(and)i(joiner)g(of)g(a)g
(feedback)g(loop)f(must)g(accomodate)h(exactly)676 1802
y(two)18 b(childr)n(en.)27 b(If)20 b(the)e(body)h(and)g(loop)g(childr)n
(en)h(have)g(non-)p Fe(void)d Fh(input)i(and)676 1915
y(output)c(types,)h(then)g(the)h(joiner)g(must)f(be)h(equivalent)h(to)e
Fe(roundrobin)l(\(0,1\))676 2028 y Fh(if)25 b(the)f(input)h(of)g(the)f
(loop)g(is)h Fe(void)o Fh(,)g(and)g(similarly)h(for)f(the)f(splitter)g
(and)h(the)676 2141 y(output.)562 2329 y(4.)46 b(If)32
b(the)g(input)h(type)e(of)i(a)g(feedback)f(loop's)g(body)g(child)i(is)f
Fe(void)n Fh(,)i(then)d(the)676 2442 y(loop)c(input)g(type)f(and)h
(loop)g(child)h(output)e(type)g(must)h(also)h(be)f Fe(void)n
Fh(,)i(and)676 2555 y(the)h(joiner)h(must)g(be)h Fe(roundrobin)-5
b(\(0\))o Fh(.)57 b(Identical)33 b(constraints)e(hold)h(for)676
2668 y(the)21 b(loop)h(output)f(and)i(splitter)-7 b(.)562
2855 y(5.)46 b(If)34 b(the)g(input)h(type)e(of)i(a)g(\002lter)g(is)g
Fe(void)n Fh(,)j(all)e(of)f(its)g(work)e(functions)i(must)676
2968 y(declar)n(e)29 b(peek)f(and)h(pop)f(rates)g(of)i(0;)i(if)e(its)f
(output)f(type)f(is)j Fe(void)n Fh(,)h(all)f(of)f(its)676
3081 y(work)21 b(functions)h(must)g(have)h(a)h(push)d(rate)i(of)f(0.)
448 3336 y Ff(2.3)99 b(Statements)25 b(and)f(Expressions)562
3513 y Fh(1.)46 b(T)-8 b(ypes)20 b(can)k(be)e(pr)n(omoted:)k(a)e
Fe(bit)d Fh(can)i(be)g(implicitly)h(converted)e(to)g(an)h
Fe(int)n Fh(,)676 3626 y(an)k Fe(int)e Fh(can)i(be)g(pr)n(omoted)e(to)h
(a)h Fe(float)n Fh(,)g(and)f(a)i Fe(float)c Fh(can)j(be)g(pr)n(omoted)
676 3738 y(to)22 b Fe(complex)l Fh(.)562 3926 y(2.)46
b(Every)21 b(r)n(efer)n(enced)h(variable)i(must)e(have)h(a)h(declar)n
(ed)e(type.)562 4114 y(3.)46 b(Every)21 b(expr)n(ession)g(has)i(a)g
(type:)724 4301 y(\(a\))47 b(The)21 b(type)h(of)g(a)h(variable)i(r)n
(efer)n(ence)d(is)h(the)f(type)f(of)h(the)g(variable;)719
4447 y(\(b\))47 b(The)21 b(type)f(of)i(a)g(literal)h(is)f(the)f(lowest)
f(type)h(that)g(can)i(contain)f(the)f(literal)876 4560
y(\(the)32 b(type)g(of)h Fe(1)g Fh(is)g Fe(bit)o Fh(,)i(the)e(type)e
(of)j Fe(2)e Fh(is)i Fe(int)n Fh(,)i(the)c(type)g(of)h
Fe(2.0)f Fh(is)876 4673 y Fe(float)m Fh(,)23 b(and)f(the)g(type)f(of)i
Fe(2)o(i)g Fh(is)f Fe(complex)m Fh(\);)729 4819 y(\(c\))47
b(The)16 b(type)g(of)h(a)h(unary)f(expr)n(ession)e(is)j(the)e(type)g
(of)h(the)f(child)i(expr)n(ession.)876 4932 y(The)33
b(type)g(of)h(a)g(binary)h(expr)n(ession)d(is)j(the)e(join)h(of)g(the)g
(types)e(of)i(the)1920 5225 y(3)p eop
%%Page: 4 4
4 3 bop 876 573 a Fh(child)29 b(expr)n(ession,)g(possibly)f(pr)n
(omoted)f(to)i(a)g(type)f(the)g(operator)f(can)876 686
y(accept.)36 b(The)24 b(type)g(of)i(the)e(\002rst)h(part)g(of)g(the)g
(ternary)f(expr)n(ession)g(must)876 799 y(be)29 b(pr)n(omotable)g(to)f
Fe(int)o Fh(,)j(and)e(the)f(second)g(and)h(thir)n(d)g(parts)g(must)f
(be)876 912 y(pr)n(omotable)21 b(to)f(a)i(common)f(type;)f(the)g(r)n
(esulting)h(type)e(is)j(the)e(common)876 1024 y(type.)46
b(In)29 b(all)i(cases,)f(the)f(types)e(of)i(child)h(expr)n(essions)d
(must)i(conform)876 1137 y(to)k(the)g(acceptable)h(types)e(for)h(the)g
(operator)f(listed)h(in)i(the)d(language)876 1250 y(speci\002cation.)
714 1396 y(\(d\))46 b(For)31 b(a)h(\002eld)g(r)n(efer)n(ence)f
Fe(a.)o(b)p Fh(,)j Fe(a)d Fh(must)h(be)g(of)g(some)f(str)o(uctur)n(e)f
(type)h Fe(A)o Fh(,)876 1509 y(which)25 b(must)f(have)h(a)g(\002eld)f
(named)g Fe(b)p Fh(.)33 b(The)24 b(type)f(of)i(the)e(expr)n(ession)g
(is)876 1622 y(the)e(type)g(of)i Fe(b)f Fh(in)h(the)f(str)o(uctur)n(e)g
(declaration.)726 1768 y(\(e\))46 b(For)28 b(an)h(array)g(access)g
Fe(a[)o(i])o Fh(,)i Fe(a)d Fh(must)h(be)g(of)f(some)h(array)g(type)e
Fe(T[)o(n])o Fh(,)876 1881 y(and)22 b(the)g(type)f(of)i(the)f(expr)n
(ession)e(is)j Fe(T)p Fh(.)739 2027 y(\(f\))47 b(The)26
b(type)f(of)i(a)g Fe(peek)n(\(\))f Fh(or)h Fe(pop)o(\(\))f
Fh(expr)n(ession)f(is)h(the)h(input)f(type)f(of)876 2140
y(the)c(\002lter)-7 b(.)719 2286 y(\(g\))46 b(The)18
b(parameter)h(of)h(a)g Fe(peek)n(\(\))f Fh(expr)n(ession)f(and)h(the)g
(index)g(of)h(an)g(array)876 2399 y(must)i(both)g(be)g(of)h(type)e
Fe(int)o Fh(.)717 2545 y(\(h\))46 b(The)27 b(type)f(of)i(a)g(call)i(to)
d(a)h(helper)f(function)h(is)g(the)f(r)n(eturn)f(type)h(of)g(that)876
2658 y(function.)562 2846 y(4.)46 b(The)21 b(type)g(of)h(the)g
(parameter)f(of)i(a)f Fe(push)o(\(\))f Fh(statement)g(must)g(be)h(the)g
(output)676 2959 y(type)f(of)h(the)g(\002lter)-7 b(.)562
3147 y(5.)46 b(The)28 b(type)g(of)i(the)e(parameter)h(of)h(an)g
Fe(enqueue)l(\(\))f Fh(statement)f(must)h(be)g(the)676
3259 y(output)20 b(type)i(of)g(the)g(feedback)g(loop's)g(loop)g(str)n
(eam.)562 3447 y(6.)46 b(The)26 b(type)g(of)h(the)g(right-hand)f(side)h
(of)g(an)h(assignment)e(statement)g(must)g(be)676 3560
y(pr)n(omotable)c(to)g(the)g(type)f(of)i(the)e(left-hand)i(side)f(of)h
(the)e(statement.)448 3815 y Ff(2.4)99 b(Using)26 b(Names)e(As)h(T)-9
b(ypes)562 3992 y Fh(1.)46 b(A)23 b(bar)n(e)h(name)g(may)g(be)g(used)e
(as)i(a)g(type)e(in)i(a)g(variable)i(declaration,)e(param-)676
4105 y(eter)19 b(list,)i(str)n(eam)g(type,)f(and)h(elsewher)n(e.)k(The)
c(name)g(must)f(match)i(the)e(name)676 4217 y(of)i(a)h(declar)n(ed)g
(str)o(uctur)n(e)e(type.)562 4405 y(2.)46 b(A)27 b(bar)n(e)h(name)g
(may)h(be)e(used)f(as)i(the)f(tar)n(get)g(type)f(of)i(a)g
Fe(Portal)d Fh(type.)42 b(The)676 4518 y(name)24 b(must)f(match)h(the)f
(name)i(of)e(a)i(declar)n(ed)e(str)n(eam)h(type;)f(the)g(tar)n(get)g
(of)h(a)676 4631 y(portal)e(may)h(not)f(be)g(a)i(primitive)f(type)e(or)
h(str)o(uctur)n(e.)1920 5225 y(4)p eop
%%Page: 5 5
5 4 bop 448 573 a Ff(2.5)99 b(Messaging)562 750 y Fh(1.)46
b(A)30 b(portal)h(type)e(must)h(name)i(a)f(top-level)f(str)n(eam)h(str)
o(uctur)n(e)f(containing)h(at)676 863 y(least)22 b(one)g(message)f
(handler)-7 b(.)562 1040 y(2.)46 b(A)26 b(message-sending)f(statement)g
(must)h(call)j(a)f(function)f(pr)n(esent)e(in)j(the)e(r)n(e-)676
1153 y(ceiver)c(type)g(of)g(its)h(portal.)562 1331 y(3.)46
b(The)21 b(types)g(of)i(the)e(parameters)h(of)h(a)g(message-sending)d
(statement)g(must)i(be)676 1444 y(pr)n(omotable)g(to)g(the)g(types)f
(of)h(the)g(parameters)g(in)h(the)f(r)n(eceiving)h(function.)562
1622 y(4.)46 b(Message)20 b(latencies)j(must)f(be)h(of)f(integer)g
(type.)562 1799 y(5.)46 b(When)26 b(a)h(str)n(eam)g(str)o(uctur)n(e)f
(is)h(added)e(to)h(a)i(portal,)f(the)f(type)g(of)g(the)g(str)n(eam)676
1912 y(str)o(uctur)n(e)21 b(must)h(be)h(the)e(same)i(as)g(the)f(r)n
(eceiver)g(type)f(of)i(the)f(portal.)448 2206 y Fg(3)120
b(Naming)448 2420 y Ff(3.1)99 b(Object)26 b(Names)562
2597 y Fh(1.)46 b(No)21 b(two)h(str)n(eams)g(or)h(str)o(uctur)n(es)e
(may)i(have)g(the)e(same)i(name.)562 2775 y(2.)46 b(W)-5
b(ithin)28 b(a)g(single)f(str)o(uctur)n(e,)g(no)h(two)e(member)i
(\002elds)f(may)h(have)g(the)e(same)676 2888 y(name.)g(Field)19
b(names)g(must)f(also)h(be)g(distinct)g(fr)n(om)g(all)i(str)n(eam)d
(and)h(str)o(uctur)n(e)676 3000 y(names.)562 3178 y(3.)46
b(Str)n(eam)27 b(parameters)g(within)h(a)h(single)e(str)n(eam)h(must)f
(have)h(distinct)f(names)676 3291 y(fr)n(om)c(each)g(other)e(and)i(fr)n
(om)g(all)h(str)n(eam)e(and)h(str)o(uctur)n(e)f(names.)562
3469 y(4.)46 b(Functions)22 b(declar)n(ed)i(within)g(a)g(\002lter)g
(must)f(have)h(unique)f(names;)h(these)e(in-)676 3582
y(clude)d(message)f(handlers)h(and)g(helper)g(functions.)26
b(The)19 b(name)h(of)f(a)h(function)676 3695 y(must)i(be)g(distinct)g
(fr)n(om)i(str)n(eam)e(and)h(str)o(uctur)n(e)e(names.)562
3872 y(5.)46 b(A)26 b(variable)j(may)d(not)g(be)h(declar)n(ed)f(with)h
(the)e(same)i(name)g(as)f(a)h(str)n(eam)g(pa-)676 3985
y(rameter)-7 b(.)26 b(\(Other)21 b(variable)h(hiding)e(is)h(legal.\))28
b(The)19 b(name)i(of)f(a)h(variable)i(must)676 4098 y(be)c(distinct)f
(fr)n(om)i(str)n(eam,)g(str)o(uctur)n(e,)e(and)h(function)h(names)f
(within)g(the)f(cur)n(-)676 4211 y(r)n(ent)k(\002lter)-7
b(.)448 4461 y Ff(3.2)99 b(Using)26 b(Names)562 4638
y Fh(1.)46 b(A)29 b(str)n(eam)g(constr)o(uctor)e(\(the)i(parameter)g
(to)f Fe(add)o Fh(,)j Fe(body)n Fh(,)f(and)g Fe(loop)d
Fh(state-)676 4751 y(ments\))33 b(must)g(be)h(an)g(anonymous)f(str)n
(eam)h(declaration,)j(or)c(must)g(have)i(a)676 4863 y(name)i(matching)i
(the)e(name)g(of)h(a)g(str)n(eam)g(object)f(with)h(a)g(parameter)f
(list)676 4976 y(matching)23 b(the)f(parameter)g(list)h(of)f(the)g(the)
g(str)n(eam.)1920 5225 y(5)p eop
%%Page: 6 6
6 5 bop 562 573 a Fh(2.)46 b(A)22 b(variable)j(must)d(be)g(declar)n(ed)
h(befor)n(e)f(it)h(is)f(used.)562 759 y(3.)46 b(A)22
b(str)n(eam)g(parameter)h(may)g(not)e(be)i(assigned)e(to)h(or)h
(otherwise)d(modi\002ed.)562 945 y(4.)46 b(A)27 b(function)g(call)i
(must)d(have)i(a)g(name)f(matching)h(a)g(helper)e(function)h(in)h(the)
676 1058 y(curr)n(ent)d(\002lter)-7 b(,)26 b(and)f(a)h(parameter)f
(list)h(matching)g(the)f(parameter)g(list)g(of)h(the)676
1170 y(tar)n(get)21 b(function.)562 1356 y(5.)46 b(A)17
b(message-sending)f(statement)g(must)h(name)h(a)h(portal)e(variable)j
(on)e(the)f(left-)676 1469 y(hand)k(side)g(of)g(the)g(\223.\224,)h(and)
f(a)h(message)e(name)i(on)f(the)f(right-hand)h(side.)27
b(The)676 1582 y(message)21 b(name)i(must)f(match)h(a)h(message)d(in)i
(the)f(tar)n(get)g(type)f(of)i(the)f(portal,)676 1695
y(and)d(the)f(statement)f(must)i(have)g(a)h(parameter)e(list)i
(matching)f(the)g(parameter)676 1808 y(list)j(of)h(the)f(message)f(tar)
n(get.)448 2106 y Fg(4)120 b(W)-9 b(arnings)448 2317
y Fh(Things)22 b(in)h(this)f(section)g(ar)n(e)h(technically)h(legal,)f
(but)f(indicate)i(questionable)d(code:)562 2524 y(1.)46
b(Some)37 b(things)h(in)h(Str)n(eamIt)f(ar)n(e)h(counted;)44
b(these)37 b(include)i(split-join)g(chil-)676 2637 y(dr)n(en)f(\(with)h
(\002xed-length)f(weighted)f(r)n(ound-r)n(obin)i(splitters)e(or)i
(joiners\),)676 2750 y(and)33 b(work)g(function)h(pushes,)h(pops,)g
(and)f(peeks.)59 b(It)34 b(should)e(be)i(a)h(warn-)676
2863 y(ing)30 b(if)h(the)e(compiler)h(cannot)h(statically)g(con\002rm)f
(that)g(these)e(numbers)i(ar)n(e)676 2976 y(not)22 b(met)g(exactly)h
(\(or)-7 b(,)22 b(for)h(peeks,)d(that)j(the)f(peek)f(rate)h(is)h(not)f
(exceeded\).)k(For)676 3089 y(feedback)19 b(loops,)f(the)h(compiler)h
(can)g(also)f(issue)g(a)g(warning)h(if)g(it)g(cannot)f(con-)676
3202 y(\002rm)j(that)g(enough)f(items)h(ar)n(e)h(enqueued)d(to)i(cause)
g(the)g(joiner)g(to)g(be)g(\002r)n(ed)g(at)676 3314 y(the)f(start)h(of)
h(the)f(pr)n(ogram.)562 3500 y(2.)46 b(The)16 b(compiler)i(may)f(need)f
(to)g(guess)g(at)h(the)f(I/O)i(types)d(of)i(anonymous)f(str)n(eams.)676
3613 y(If)22 b(the)g(type)f(isn't)i(clear)g(fr)n(om)g(context)f(a)h
(warning)g(should)e(be)i(issued.)562 3799 y(3.)46 b(A)37
b(warning)g(may)h(be)f(issued)e(if)k(the)d(compiler)i(cannot)f(verify)g
(that)g(split-)676 3912 y(ters)32 b(and)h(joiners)f(for)h(split-joins)g
(can)h(accomodate)g(the)e(exact)h(number)g(of)676 4025
y(childr)n(en)d(pr)n(esent.)48 b(Note)29 b(that)g(this)h(may)g(only)g
(be)g(possible)f(with)h(pattern-)676 4138 y(matching)25
b(pr)n(ogram)f(text,)g(or)g(by)h(fully)g(unr)n(olling)h(init)f
(functions,)f(since)h(the)676 4251 y(following)40 b(code)e(is)i
(legitimate)g(but)f(data-\003ow)h(wouldn't)f(\002nd)g(an)h(exact)676
4364 y(number)22 b(of)h(childr)n(en:)676 4525 y Fe(float)m(->)o(float)
53 b(splitjoin)d(FiveChildren)f({)757 4638 y(split)k(roundrobin)-5
b(\(1,2,3,4,5\);)757 4751 y(for)54 b(\()o(int)f(i)h(=)g(0;)g(i)g(<)g
(5;)g(i)o(++\))839 4863 y(add)f(float)n(->)o(float)f(filter)g({)i(...)g
(};)757 4976 y(join)f(roundrobin)l(\(5,4,3,2,1\);)1920
5225 y Fh(6)p eop
%%Page: 7 7
7 6 bop 676 573 a Fe(})448 906 y Fg(5)120 b(T)-13 b(emporary)29
b(Checks)448 1117 y Fh(These)23 b(checks)g(ar)n(e)h(necessary)e(due)h
(to)h(curr)n(ent)f(constraints)g(in)h(the)f(Str)n(eamIt)h(com-)448
1230 y(piler)-7 b(.)28 b(They)22 b(should)g(be)g(able)i(to)e(be)g(r)n
(emoved)g(when)g(the)g(compiler)h(is)f(impr)n(oved.)562
1412 y(1.)46 b(All)17 b(child-constr)o(ucting)h(statements)d(in)i
(initialization)j(code)d(must)f(have)i(con-)676 1525
y(sistent)34 b(types.)67 b(While)36 b(the)g(fr)n(ont-end)f(can)i
(perform)e(minimal)k(data-\003ow)676 1638 y(analysis)24
b(to)f(check)g(that)h(the)f(types)f(of)h(pipelines,)g(contr)n(ol)h
(\003ow)g(like)g(the)e(fol-)676 1751 y(lowing)g(is)h(pr)n(esently)e
(illegal:)676 1904 y Fe(int)n(->)o(int)54 b(filter)d(IntIntBody)f({)k
(...)g(})676 2017 y(int)n(->)o(int)g(filter)d(IntIntLoop)f({)k(...)g(})
676 2130 y(float)m(->)o(int)g(filter)d(FloatIntBody)e({)55
b(...)e(})676 2243 y(int)n(->)o(float)g(filter)e(IntFloatLoop)e({)55
b(...)e(})676 2468 y(void)n(->)o(int)g(feedbackloop)c(SketchyLoop)-5
b(\(int)53 b(p)o(\))h({)757 2581 y(join)f(roundrobin)l(\(0,)g(1\);)757
2694 y(if)h(\(p)o(\))g({)839 2807 y(body)f(IntIntBody)-5
b(\(\);)839 2920 y(loop)53 b(IntIntLoop)-5 b(\(\);)757
3033 y(})55 b(else)d({)839 3146 y(body)h(FloatIntBody)-6
b(\(\);)839 3259 y(loop)53 b(IntFloatLoop)-6 b(\(\);)757
3372 y(})757 3485 y(split)53 b(duplicate)l(;)757 3598
y(enqueue)m(\(1\);)676 3710 y(})676 3895 y Fh(The)21
b(types)f(of)j(the)e(loop)h(and)g(all)i(of)e(its)g(components)e(ar)n(e)
j(consistent)d(r)n(egar)n(d-)676 4008 y(less)j(of)i(the)e(value)i(of)g
Fe(p)o Fh(,)g(but)f(if)i Fe(p)e Fh(is)g(zer)n(o,)h(the)e
Fe(enqueue)f Fh(statement)g(takes)i(a)676 4121 y Fe(float)18
b Fh(parameter)-7 b(.)26 b(Pr)n(esently)19 b(the)g(fr)n(ont-end)h
(should)f(r)n(eject)h(this)f(constr)o(uc-)676 4234 y(tion)33
b(since)h(it)g(is)g(unclear)g(if)h(the)e(types)f(ar)n(ound)h(the)g
(joiner)h(ar)n(e)g(consistent)676 4347 y(or)25 b(not.)36
b(This)26 b(check)f(can)i(be)e(r)n(emoved)g(if)i(the)e(compiler)h(does)
e(str)n(eam)h(type-)676 4460 y(checking)d(after)g(constant)g(pr)n
(opagation.)562 4638 y(2.)46 b(None)27 b(of)j(the)e(names)h(listed)f
(in)i(the)e(\223Implementation)h(Limits\224)h(section)e(of)676
4751 y(the)34 b(language)g(speci\002cation)h(should)f(be)h(used.)63
b(These)33 b(include)i(the)f(cap-)676 4863 y(italized)39
b(names)e Fe(SplitJoin)l Fh(,)42 b Fe(FeedbackLoop)-5
b Fh(,)41 b Fe(Filter)m Fh(,)h Fe(Pipeline)l Fh(,)676
4976 y Fe(StreamIt)l Fh(,)22 b(and)h Fe(Complex)m Fh(.)1920
5225 y(7)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
